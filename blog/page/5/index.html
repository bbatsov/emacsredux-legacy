
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Emacs Redux</title>
  <meta name="author" content="Bozhidar Batsov">

  
  <meta name="description" content="Next Monday (19.05.2014) I&#8217;ll take part in
Sacha Chua&#8217;s
Emacs Chat series. Join us
at
Google Hangouts
and feel free to ask me anything &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://emacsredux.com/blog/page/5">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Emacs Redux" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39624961-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Emacs Redux</a></h1>
  
    <h2>Return to the Essence of Text Editing</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:emacsredux.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="https://github.com/bbatsov/prelude">Prelude</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/16/emacs-chat-next-monday/">Emacs Chat Next Monday</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-16T12:15:00+03:00" pubdate data-updated="true">May 16<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/05/16/emacs-chat-next-monday/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Next Monday (19.05.2014) I&#8217;ll take part in
<a href="http://sachachua.com/blog/">Sacha Chua</a>&#8217;s
<a href="http://sachachua.com/blog/emacs-chat/">Emacs Chat series</a>.  Join us
at
<a href="https://plus.google.com/events/cgqo5hbafehh5ohptpn8uusld4o">Google Hangouts</a>
and feel free to ask me anything you&#8217;d like regarding Emacs.</p>

<p>See you soon!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/05/which-function-mode/">Which-function-mode</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-05T15:33:00+03:00" pubdate data-updated="true">Apr 5<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/04/05/which-function-mode/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Every developer is sometimes in the following situation - you&#8217;re
inside the definition of something like a class or method, but the
name of the class or method is not currently into view, but you&#8217;d very
much like to know/see it. You can obviously scroll up and see what you
need to, but there&#8217;s a simpler way to see the name you&#8217;re looking
for - the built-in mode <code>which-function-mode</code>.</p>

<p>When <code>which-function-mode</code> is active you&#8217;ll see in the center of your
modeline the name of the definition your cursor is currently in.
Here&#8217;s the mode in action:</p>

<p><img src="/images/articles/which-func-modeline.png"></p>

<p>And here&#8217;s how to enable it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">which-function-mode</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>That way <code>which-function-mode</code> will be active in all major modes that
support it. If you want to enable it only in specific modes you can do
so like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;which-func-modes</span> <span class="ss">&#39;ruby-mode</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;which-func-modes</span> <span class="ss">&#39;emacs-lisp-mode</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>By default <code>???</code> will be displayed when <code>which-function-mode</code> cannot
determine the name (perhaps because you&#8217;re not actually in a
definition or due to implementation limitations). You can change this
to something else like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="k">setq</span> <span class="nv">which-func-unknown</span> <span class="s">&quot;n/a&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>And what if you don&#8217;t like to have the definition name displayed in
the mode-line? There&#8217;s a solution for you as well (suggested by
<a href="http://www.lunaryorn.com/">Sebastian Wiesner</a>). Use the following bit
of code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="c1">;; Show the current function name in the header line</span>
</span><span class='line'><span class="p">(</span><span class="nv">which-function-mode</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nv">setq-default</span> <span class="nv">header-line-format</span>
</span><span class='line'>              <span class="o">&#39;</span><span class="p">((</span><span class="nv">which-func-mode</span> <span class="p">(</span><span class="s">&quot;&quot;</span> <span class="nv">which-func-format</span> <span class="s">&quot; &quot;</span><span class="p">))))</span>
</span><span class='line'><span class="p">(</span><span class="k">setq</span> <span class="nv">mode-line-misc-info</span>
</span><span class='line'>            <span class="c1">;; We remove Which Function Mode from the mode line, because it&#39;s mostly</span>
</span><span class='line'>            <span class="c1">;; invisible here anyway.</span>
</span><span class='line'>            <span class="p">(</span><span class="nv">assq-delete-all</span> <span class="ss">&#39;which-func-mode</span> <span class="nv">mode-line-misc-info</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>And you&#8217;ll get the following result:</p>

<p><img src="/images/articles/which-func-header.png"></p>

<p>That&#8217;s all for today, folks! Hack Emacs Lisp &amp; prosper!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/22/a-peek-at-emacs-24-dot-4-variadic-comparison-functions/">A Peek at Emacs 24.4: Variadic Numeric Comparison Functions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-22T16:48:00+02:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2014</time>
        
         | <a href="/blog/2014/03/22/a-peek-at-emacs-24-dot-4-variadic-comparison-functions/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In most Lisps numeric comparison functions like <code>=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>
and <code>&gt;=</code> are variadic - meaning they accept variable number of arguments (as do functions like <code>+</code>, <code>-</code>, <code>*</code>, etc).
Here&#8217;s an example:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="c1">;; let&#39;s assume that all those are numeric variables</span>
</span><span class='line'><span class="p">(</span><span class="nb">=</span> <span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nb">&lt;</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is pretty cool and save you from writing code like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nb">=</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">=</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">))</span>
</span><span class='line'><span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Prefix function position for the win!</p>

<p>In Emacs Lisp, however, all these comparison functions (unlike <code>+</code>, <code>-</code>, etc)
accept just two arguments, which is somewhat unlispy. Luckily this is
one of the things that&#8217;s going to change with Emacs 24.4.
Emacs Lisp takes another small step to becoming a good Lisp dialect!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/22/a-peek-at-emacs-24-dot-4-focus-hooks/">A Peek at Emacs 24.4: Focus Hooks</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-22T16:05:00+02:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2014</time>
        
         | <a href="/blog/2014/03/22/a-peek-at-emacs-24-dot-4-focus-hooks/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A couple of years ago I
<a href="http://batsov.com/articles/2012/03/08/emacs-tip-number-5-save-buffers-automatically-on-buffer-or-window-switch/">lamented over the lack of frame focus hooks in Emacs</a>. This
prohibited us from implemented a feature like IntelliJ IDEA&#8217;s &#8220;auto-save on
focus lost&#8221;, which was kind of frustrating as we&#8217;re generally assuming that everything is doable in Emacs!</p>

<p>All this changes in Emacs 24.4 with the introduction of two new hooks - <code>focus-in-hook</code> and <code>focus-out-hook</code>.
The first is triggered when the current frame gains focus and the second when the frame loses focus.
So, if we want to save our active buffer when the Emacs frame loses focus we can simply do it like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;focus-out-hook</span> <span class="ss">&#39;save-buffer</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Or you can go a step further and save all the buffers:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;focus-out-hook</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">save-some-buffers</span> <span class="no">t</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>I pretty sure you&#8217;ll find other creative ways to apply those new hooks to good use!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/01/a-peek-at-emacs-24-dot-4-delete-duplicate-lines/">A Peek at Emacs 24.4: Delete-duplicate-lines</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-01T17:33:00+02:00" pubdate data-updated="true">Mar 1<span>st</span>, 2014</time>
        
         | <a href="/blog/2014/03/01/a-peek-at-emacs-24-dot-4-delete-duplicate-lines/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Emacs 24.4 introduces the command <code>delete-duplicate-lines</code>.</p>

<p>By default <code>M-x delete-duplicate-lines</code> will delete all but one copy
of any identical lines in the region. So assuming this is the region:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>test
</span><span class='line'>dup
</span><span class='line'>dup
</span><span class='line'>one
</span><span class='line'>two
</span><span class='line'>one
</span><span class='line'>three
</span><span class='line'>one
</span><span class='line'>test
</span><span class='line'>five</span></code></pre></td></tr></table></div></figure>


<p>it will be reduced to this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>test
</span><span class='line'>dup
</span><span class='line'>one
</span><span class='line'>two
</span><span class='line'>three
</span><span class='line'>five</span></code></pre></td></tr></table></div></figure>


<p>When the command is invoked with a <code>C-u</code> prefix, it searches backwards
and keeps the last instance of each repeated line. So this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>test
</span><span class='line'>dup
</span><span class='line'>dup
</span><span class='line'>one
</span><span class='line'>two
</span><span class='line'>one
</span><span class='line'>three
</span><span class='line'>one
</span><span class='line'>test
</span><span class='line'>five</span></code></pre></td></tr></table></div></figure>


<p>will become:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>dup
</span><span class='line'>two
</span><span class='line'>three
</span><span class='line'>one
</span><span class='line'>test
</span><span class='line'>five</span></code></pre></td></tr></table></div></figure>


<p>Identical lines need not be adjacent, unless you&#8217;ve invoked the
command with a <code>C-u C-u</code> prefix.  When the command is invoked with a
<code>C-u C-u C-u</code> prefix, it retains repeated blank lines.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/02/a-peek-at-emacs-24-dot-4-hash-table-keys-and-hash-table-values/">A Peek at Emacs 24.4: Hash-table-keys &amp; Hash-table-values</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-02T09:59:00+02:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2014</time>
        
         | <a href="/blog/2014/02/02/a-peek-at-emacs-24-dot-4-hash-table-keys-and-hash-table-values/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>While Emacs has a pretty good hash-table API, two functions were
rather mysteriously absent from it - <code>hash-table-keys</code> and
<code>hash-table-values</code> (which would return a list of all keys/values in a
hash-table).</p>

<p>Many people who needed them simply defined them in their code
directly (usually in terms of <code>maphash</code>), but that&#8217;s no longer
necessary in Emacs 24.4, as they are now part of the new built-in
library <code>subr-x</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="c1">;; all functions in the library are defined as inline, so you don&#39;t</span>
</span><span class='line'><span class="c1">;; need to require the library at runtime</span>
</span><span class='line'><span class="p">(</span><span class="nv">eval-when-compile</span> <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;subr-x</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="k">setq</span> <span class="nv">h</span> <span class="p">(</span><span class="nb">make-hash-table</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nv">puthash</span> <span class="s">&quot;Batman&quot;</span> <span class="s">&quot;Bruce Wayne&quot;</span> <span class="nv">h</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nv">puthash</span> <span class="s">&quot;Spiderman&quot;</span> <span class="s">&quot;Peter Parker&quot;</span> <span class="nv">h</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nv">puthash</span> <span class="s">&quot;Superman&quot;</span> <span class="s">&quot;Clark Kent&quot;</span> <span class="nv">h</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nv">hash-table-keys</span> <span class="nv">h</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; (&quot;Batman&quot; &quot;Spiderman&quot; &quot;Superman&quot;)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nv">hash-table-values</span> <span class="nv">h</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; (&quot;Bruce Wayne&quot; &quot;Peter Parker&quot; &quot;Clark Kent&quot;)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nice and simple.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/02/a-peek-at-emacs-24-dot-4-new-string-manipulation-functions/">A Peek at Emacs 24.4: New String Manipulation Functions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-02T09:29:00+02:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2014</time>
        
         | <a href="/blog/2014/02/02/a-peek-at-emacs-24-dot-4-new-string-manipulation-functions/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Emacs has often been criticized for failing to provide a more
extensive string manipulation API (compared to that of programming
languages like Ruby and Perl, for instance).  As many programs
(extensions) running on top of it are doing quite a lot of string
manipulation, having a good string API is important. To compensate the
lack of certain primitives in Emacs itself a lot of package authors
are using these days packages like
<a href="https://github.com/magnars/s.el">s.el</a> or simply adding the string
functions they need directly to their packages (to reduce the number
of third-party deps).</p>

<p>In Emacs 24.4 finally the situation is improving. Finally, we&#8217;re getting
<code>string-suffix-p</code>, which was mysteriously missing even though <code>string-prefix-p</code>
has been part of Emacs for years:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">string-suffix-p</span> <span class="s">&quot;test&quot;</span> <span class="s">&quot;my_test&quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; t</span>
</span><span class='line'><span class="p">(</span><span class="nv">string-suffix-p</span> <span class="s">&quot;tester&quot;</span> <span class="s">&quot;my_test&quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; nil</span>
</span></code></pre></td></tr></table></div></figure>


<p>More importantly, Emacs 24.4 ships with a new built-in library called <code>subr-x</code>, which features
a bunch of other string manipulation functions:</p>

<ul>
<li><code>string-blank-p</code></li>
<li><code>string-empty-p</code></li>
<li><code>string-join</code></li>
<li><code>string-reverse</code></li>
<li><code>string-trim-left</code></li>
<li><code>string-trim-right</code></li>
<li><code>string-trim</code></li>
<li><code>string-remove-prefix</code></li>
<li><code>string-remove-suffix</code></li>
</ul>


<p>Here&#8217;s a brief demo of them in action:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="c1">;; all functions in the library are defined as inline, so you don&#39;t</span>
</span><span class='line'><span class="c1">;; need to require the library at runtime</span>
</span><span class='line'><span class="p">(</span><span class="nv">eval-when-compile</span> <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;subr-x</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nv">string-empty-p</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; t</span>
</span><span class='line'><span class="p">(</span><span class="nv">string-empty-p</span> <span class="s">&quot;  &quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; nil</span>
</span><span class='line'><span class="p">(</span><span class="nv">string-blank-p</span> <span class="s">&quot;  &quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; 0 (#o0, #x0, ?\C-@)</span>
</span><span class='line'><span class="p">(</span><span class="nv">string-reverse</span> <span class="s">&quot;Batman&quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; &quot;namtaB&quot;</span>
</span><span class='line'><span class="p">(</span><span class="nv">string-join</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;one&quot;</span> <span class="s">&quot;two&quot;</span> <span class="s">&quot;three&quot;</span><span class="p">))</span>
</span><span class='line'><span class="c1">; =&gt; &quot;onetwothree&quot;</span>
</span><span class='line'><span class="p">(</span><span class="nv">string-join</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;one&quot;</span> <span class="s">&quot;two&quot;</span> <span class="s">&quot;three&quot;</span><span class="p">)</span> <span class="s">&quot;,&quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; &quot;one,two,three&quot;</span>
</span><span class='line'><span class="p">(</span><span class="nb">string-trim</span> <span class="s">&quot;   Peter Parker &quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; &quot;Peter Parker&quot;</span>
</span><span class='line'><span class="p">(</span><span class="nv">string-remove-prefix</span> <span class="s">&quot;Mr. &quot;</span> <span class="s">&quot;Mr. Smith&quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; &quot;Smith&quot;</span>
</span><span class='line'><span class="p">(</span><span class="nv">string-remove-suffix</span> <span class="s">&quot;Smith&quot;</span> <span class="s">&quot;Mr. Smith&quot;</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; &quot;Mr. &quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Sure, <code>subr-x</code> is not as extensive as <code>s.el</code> (and will never be), but
I think that it&#8217;s a big step in the right direction. It&#8217;s likely that
<code>subr-x</code> will be extended in subsequent Emacs versions and some of the
functions from it will be promoted to <code>built-in</code>.</p>

<p>That&#8217;s all I have for now. Until next time!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/19/a-peek-at-emacs-24-dot-4-auto-indentation-by-default/">A Peek at Emacs 24.4: Auto-indentation by Default</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-19T08:52:00+02:00" pubdate data-updated="true">Jan 19<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/01/19/a-peek-at-emacs-24-dot-4-auto-indentation-by-default/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve written in the past about
<a href="http://emacsredux.com/blog/2013/03/29/automatic-electric-indentation/">electric-indent-mode</a>,
which was added in Emacs 24.1. In Emacs 24.4 one of the most prominent
user visible changes is that it&#8217;s enabled out-of-the box. That&#8217;s a
huge step towards the &#8220;modernization&#8221; of Emacs and one of the bigger
changes to the defaults in recent times. Let&#8217;s review briefly how the
mode works with a couple of Ruby examples (<code>|</code> signifies the cursor
position). Without <code>electric-indent-mode</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">something</span><span class="o">|</span>
</span></code></pre></td></tr></table></div></figure>


<p>After you press <code>Return</code> you&#8217;ll get:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">something</span>
</span><span class='line'><span class="o">|</span>
</span></code></pre></td></tr></table></div></figure>


<p>With it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">something</span><span class="o">|</span>
</span></code></pre></td></tr></table></div></figure>


<p>After you press <code>Return</code> you&#8217;ll get:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">something</span>
</span><span class='line'>  <span class="o">|</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nice, ah?</p>

<p>One problem with <code>electric-indent-mode</code> is that it doesn&#8217;t play nice
with some (mostly third-party) modes (<code>yaml-mode</code>, <code>slim-mode</code>,
etc). I guess the situation will improve over time, but for now you
can simply disable the mode in such problematic cases:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;yaml-mode-hook</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">electric-indent-local-mode</span> <span class="mi">-1</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note that <code>electric-indent-local-mode</code> was introduced in Emacs 24.4.</p>

<p>If you want to make a major mode electric-indent aware, have a look at
the documentation of <code>electric-indent-functions</code> and
<code>electric-indent-chars</code>.</p>

<p><strong>P.S.</strong></p>

<p>Dmitry Gutov recently wrote
<a href="http://dgutov.github.io/blog/2014/01/20/electric-indentation-in-ruby-in-emacs-24-dot-4/">more on the topic</a>
in the context of <code>ruby-mode</code> in Emacs 24.4.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/18/ido-vertical-mode/">Ido-vertical-mode</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-18T08:52:00+02:00" pubdate data-updated="true">Jan 18<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/01/18/ido-vertical-mode/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you like <code>ido</code>, but don&#8217;t like the way it displays the available
completion candidates you might want to have a look at
<a href="https://github.com/gempesaw/ido-vertical-mode.el">ido-vertical-mode</a>.</p>

<p>I won&#8217;t duplicate here the installation instructions, but I&#8217;ll show you
how <code>ido-vertical-mode</code> displays the completion candidates:</p>

<p><img src="https://raw.github.com/gempesaw/ido-vertical-mode.el/master/screenshot.gif"></p>

<p>Is this better than the regular <code>ido</code>? Depends on your personal
preference I guess. But it&#8217;s good to have options, right?</p>

<p>That&#8217;s all for today, folks! Until next time.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/11/a-peek-at-emacs-24-dot-4-srgb-colours-on-os-x/">A Peek at Emacs 24.4: sRGB Colours on OS X</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-11T13:40:00+02:00" pubdate data-updated="true">Jan 11<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/01/11/a-peek-at-emacs-24-dot-4-srgb-colours-on-os-x/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A while ago I wrote about a
<a href="http://emacsredux.com/blog/2013/08/21/color-themes-redux/">colour theme problem specific to OS X</a>.
Thankfully in Emacs 24.4 the OS X (a.k.a. NS) port of Emacs uses sRGB
colours by default (at least on OS X Lion (10.7) and newer), so you&#8217;ll
no longer need to install Emacs from <code>homebrew</code> (or apply an sRGB
colour support patch manually). If for some reason you want to stick
to the colours add this to your Emacs config:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="k">setq</span> <span class="nv">ns-use-srgb-colorspace</span> <span class="no">nil</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>I doubt that anyone would want to do that, but the option is there for those of you who want it.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/6/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/4/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Emacs Redux</h1>
  <p>Emacs Redux&#8217;s mission is to hone your Emacs skills and increase your appreciation for Emacs&#8217;s might and magic.
    You can show your love for Emacs Redux via Patreon and Liberapay:</p>
  <a href="https://www.patreon.com/bbatsov"><img src="https://img.shields.io/badge/patreon-donate-orange.svg"></img></a>
  <a href="https://liberapay.com/bbatsov/donate"><img src="https://liberapay.com/assets/widgets/donate.svg"></img></a>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2018/09/29/super-save-0-dot-3/">super-save 0.3</a>
      </li>
    
      <li class="post">
        <a href="/blog/2018/09/29/projectile-goes-turbo/">Projectile goes Turbo</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/12/31/a-crazy-productivity-boost-remapping-return-to-control-2017-edition/">A Crazy Productivity Boost: Remapping Return to Control (2017 Edition)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/12/31/into-to-cider/">Into to CIDER</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/03/02/pimp-my-minibuffer/">Pimp My Minibuffer Evaluation</a>
      </li>
    
  </ul>
</section>
<section>
     <h1>Twitter</h1>
     <!-- PASTE THE WIDGET CODE HERE -->
     <a class="twitter-timeline" href="https://twitter.com/bbatsov" data-widget-id="382536919663386624">Tweets by @bbatsov</a>
     <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
 </section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/bbatsov">@bbatsov</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'bbatsov',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 - Bozhidar Batsov -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'emacsredux';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
