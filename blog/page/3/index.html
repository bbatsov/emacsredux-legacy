
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Emacs Redux</title>
  <meta name="author" content="Bozhidar Batsov">

  
  <meta name="description" content="The problem with Emacs blogs is one can never have enough of them (especially the good ones). I&#8217;d like to draw my readers attention to two new &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://emacsredux.com/blog/page/3">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Emacs Redux" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39624961-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Emacs Redux</a></h1>
  
    <h2>Return to the Essence of Text Editing</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:emacsredux.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="https://github.com/bbatsov/prelude">Prelude</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/22/new-emacs-blogs/">New Emacs Blogs</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-22T17:43:00+03:00" pubdate data-updated="true">Jul 22<span>nd</span>, 2014</time>
        
         | <a href="/blog/2014/07/22/new-emacs-blogs/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The problem with Emacs blogs is one can never have enough of them (especially the good ones).</p>

<p>I&#8217;d like to draw my readers attention to two new blogs:</p>

<h3>lunarsite</h3>

<p><a href="http://www.lunaryorn.com/">lunarsite</a> is not exactly new (it was
started in March 2014), but I don&#8217;t think enough people have come
across it, so I&#8217;m mentioning it here anyway. It&#8217;s operated by one of
the most prolific members of the Emacs community in recent years - the
great <a href="http://www.lunaryorn.com/pages/about.html">Sebastian Wiesner</a>
(of <code>flycheck</code> and <code>cask</code> fame).</p>

<p>If you&#8217;re thinking of writing your first major mode - you&#8217;ll find some
great advice there.</p>

<h3>Endless Parentheses</h3>

<p><a href="http://endlessparentheses.com/">Endless Parentheses</a> is a brand new blog started by
<a href="https://github.com/Bruce-Connor">Arthur Malabarba</a>. It&#8217;s dedicated to
concise posts on improving your Emacs productivity.</p>

<p>The content so far is similar to the articles I write here, so if you like <code>Emacs Redux</code>
you&#8217;ll likely enjoy <code>Endless Parentheses</code> as well.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/18/quickly-find-emacs-lisp-sources/">Quickly Find Emacs Lisp Sources</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-18T16:26:00+03:00" pubdate data-updated="true">Jun 18<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/06/18/quickly-find-emacs-lisp-sources/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One thing Emacs users deal all the time is looking for the source of
various libraries and function or variable definitions.  Typically this
involves the use of commands like <code>C-h f</code> (<code>describe-function</code>), <code>C-h v</code>
(<code>describe-variable</code>) and <code>C-h k</code> (<code>describe-key</code>) and jumping to the source from the help buffer those commands produce.
Let&#8217;s see if we can improve upon this workflow.</p>

<h3>find-func</h3>

<p>Enter the built-in Emacs library <code>find-func</code>. It provides a myriad of useful commands to help us quickly locate sources.
Let&#8217;s take a brief look at some of them.</p>

<ul>
<li>You can find the source of a library with <code>M-x find-library</code>. If you want to find the source of <code>ido</code> you can do so like this:</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>M-x find-library RET ido RET</span></code></pre></td></tr></table></div></figure>


<p>I&#8217;d suggest binding the command to <code>C-h C-l</code> for quick access:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">define-key</span> <span class="ss">&#39;help-command</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-l&quot;</span><span class="p">)</span> <span class="ss">&#39;find-library</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>You can find the source of a function definition with <code>M-x find-function</code>. Here&#8217;s an example:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="nv">M-x</span> <span class="nv">find-function</span> <span class="nv">RET</span> <span class="nv">find-function</span> <span class="nv">RET</span>
</span></code></pre></td></tr></table></div></figure>


<p>I&#8217;d suggest binding the command to <code>C-h C-f</code> for quick access:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">define-key</span> <span class="ss">&#39;help-command</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-f&quot;</span><span class="p">)</span> <span class="ss">&#39;find-function</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>We can actually do one better - we can directly jump to a command
definition using a keybinding of the command with <code>M-x
find-function-on-key</code>. Here&#8217;s how we can find the source the command
bound to <code>C-a</code> (<code>beginning-of-line</code>):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="nv">M-x</span> <span class="nv">find-function-on-key</span> <span class="nv">RET</span> <span class="nv">C-a</span>
</span></code></pre></td></tr></table></div></figure>


<p>I&#8217;d suggest binding the command to <code>C-h C-k</code> for quick access:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">define-key</span> <span class="ss">&#39;help-command</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-k&quot;</span><span class="p">)</span> <span class="ss">&#39;find-function-on-key</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>You can find the source of a variable definition with <code>M-x find-variable</code>. Here&#8217;s an example:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="nv">M-x</span> <span class="nv">find-variable</span> <span class="nv">RET</span> <span class="nv">large-file-warning-threshold</span> <span class="nv">RET</span>
</span></code></pre></td></tr></table></div></figure>


<p>I&#8217;d suggest binding the command to <code>C-h C-v</code> for quick access:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">define-key</span> <span class="ss">&#39;help-command</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-v&quot;</span><span class="p">)</span> <span class="ss">&#39;find-variable</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<p>The library provides other useful commands as well - like
<code>find-function-at-point</code> and <code>find-variable-at-point</code>.</p>

<p>If you don&#8217;t like the keybindings I suggested you can use
<code>find-function-setup-keys</code> instead.  This will give you keybindings
like <code>C-x F</code>, <code>C-x V</code>, <code>C-f K</code> (plus a few extra for commands like
<code>find-funtion-other-window</code>).</p>

<h3>elisp-slime-nav</h3>

<p>Another really cool way to browse Elisp sources (and documentation) is the third-party package
<a href="https://github.com/purcell/elisp-slime-nav">elisp-slime-nav</a>. Assuming you&#8217;ve installed it already you can
enabled it like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;elisp-slime-nav</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">hook</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">emacs-lisp-mode-hook</span> <span class="nv">ielm-mode-hook</span><span class="p">))</span>
</span><span class='line'><span class="p">(</span><span class="nv">add-hook</span> <span class="nv">hook</span> <span class="ss">&#39;elisp-slime-nav-mode</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Once this is done you&#8217;ll be able to jump to the source of the Emacs
Lisp object at point (function or variable) with <code>M-.</code> (as in SLIME
and CIDER for Common Lisp and Clojure respectively) and jump back with
<code>M-,</code>. You can also see the description of the object at point using
<code>C-c C-d</code> (or <code>C-c C-d d</code>).</p>

<p>That&#8217;s all for today, folks!</p>

<p><strong>P.S.</strong></p>

<p>All the suggested keybindings are present out-of-the-box in
<a href="https://github.com/bbatsov/prelude">Prelude</a>. <code>elisp-slime-nav</code> is also
enabled out-of-the box in Prelude.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/16/melpa-stable/">MELPA Stable</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-16T14:52:00+03:00" pubdate data-updated="true">May 16<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/05/16/melpa-stable/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We all know and love the
<a href="http://melpa.milkbox.net/#/">MELPA package repository</a>. At least we
all know it, but not everyone loves the idea of using package
snapshots.  Some people would rather use only <em>stable</em> package
releases and that&#8217;s understandable. Unfortunately the major community
repository for stable packages <a href="http://marmalade-repo.org/">Marmalade</a>
is often plagued by technical issues (that should be fixed once its
<code>elnode</code>-powered rewrite is ready) and stale packages (due to the fact
the sometimes people upload packages they don&#8217;t own there and stop
updating them after a while).</p>

<p>Now there&#8217;s an alternative to Marmalade, which offers a MELPA-like
experience - <a href="http://melpa-stable.milkbox.net/#/">MELPA stable</a>. It
offers stable packages built automatically from <code>git</code> tags, meaning
the only thing you have to do to release a new version of a package
(assuming there&#8217;s a MELPA recipe for it, of course) is to tag the release in
<code>git</code>. No more stale packages! No more manual package uploads!</p>

<p>To use the new repo add this to your Emacs config:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;package-archives</span>
</span><span class='line'><span class="o">&#39;</span><span class="p">(</span><span class="s">&quot;melpa-stable&quot;</span> <span class="o">.</span> <span class="s">&quot;http://melpa-stable.milkbox.net/packages/&quot;</span><span class="p">)</span> <span class="no">t</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Currently more than 500 packages are available for installation there.
That number is bound to grow (a lot).</p>

<p>By the way, the maintainers of <code>MELPA</code> are looking for help to update
the home page of the stable package archive.  Currently it&#8217;s the same
as the one of the snapshot archive, which is a bit confusing
(especially regarding installation instructions). If you&#8217;d like to
help fork and improve the
<a href="https://github.com/milkypostman/melpa/tree/master/html">page&#8217;s code on GitHub</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/16/opening-large-files/">Opening Large Files</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-16T12:37:00+03:00" pubdate data-updated="true">May 16<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/05/16/opening-large-files/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I guess everyone has seen the following warning (at some point or
another) when trying to open a relatively large file in Emacs:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>File foo.bar is large (XX.XM), really open?</span></code></pre></td></tr></table></div></figure>


<p>By default Emacs will display this warning for every file bigger than
10MB, which is quite annoying (conservative), especially given the
fact that on any modern computer even much bigger files will be loaded
almost instantaneously and won&#8217;t slow down Emacs significantly.</p>

<p>You can adjust this behavior by altering the value of the
<code>large-file-warning-threshold</code> variable. I&#8217;d suggest setting it to
something like 100MB:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="c1">;; warn when opening files bigger than 100MB</span>
</span><span class='line'><span class="p">(</span><span class="k">setq</span> <span class="nv">large-file-warning-threshold</span> <span class="mi">100000000</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Alternative, you can set it to <code>nil</code>, which will suppress the
warning permanently, regardless of the size of the file you&#8217;re trying to open.</p>

<p><strong>P.S.</strong> By the way, it&#8217;s not particularly wise to edit <strong>huge</strong> files
(say bigger than 1GB) in Emacs directly.  If you need to do something
like this I&#8217;d suggest taking a look at the excellent
<a href="https://github.com/m00natic/vlfi">vlfi</a> package.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/16/emacs-chat-next-monday/">Emacs Chat Next Monday</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-16T12:15:00+03:00" pubdate data-updated="true">May 16<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/05/16/emacs-chat-next-monday/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Next Monday (19.05.2014) I&#8217;ll take part in
<a href="http://sachachua.com/blog/">Sacha Chua</a>&#8217;s
<a href="http://sachachua.com/blog/emacs-chat/">Emacs Chat series</a>.  Join us
at
<a href="https://plus.google.com/events/cgqo5hbafehh5ohptpn8uusld4o">Google Hangouts</a>
and feel free to ask me anything you&#8217;d like regarding Emacs.</p>

<p>See you soon!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/05/which-function-mode/">Which-function-mode</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-05T15:33:00+03:00" pubdate data-updated="true">Apr 5<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/04/05/which-function-mode/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Every developer is sometimes in the following situation - you&#8217;re
inside the definition of something like a class or method, but the
name of the class or method is not currently into view, but you&#8217;d very
much like to know/see it. You can obviously scroll up and see what you
need to, but there&#8217;s a simpler way to see the name you&#8217;re looking
for - the built-in mode <code>which-function-mode</code>.</p>

<p>When <code>which-function-mode</code> is active you&#8217;ll see in the center of your
modeline the name of the definition your cursor is currently in.
Here&#8217;s the mode in action:</p>

<p><img src="/images/articles/which-func-modeline.png"></p>

<p>And here&#8217;s how to enable it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">which-function-mode</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>That way <code>which-function-mode</code> will be active in all major modes that
support it. If you want to enable it only in specific modes you can do
so like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;which-func-modes</span> <span class="ss">&#39;ruby-mode</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nv">add-to-list</span> <span class="ss">&#39;which-func-modes</span> <span class="ss">&#39;emacs-lisp-mode</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>By default <code>???</code> will be displayed when <code>which-function-mode</code> cannot
determine the name (perhaps because you&#8217;re not actually in a
definition or due to implementation limitations). You can change this
to something else like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="k">setq</span> <span class="nv">which-func-unknown</span> <span class="s">&quot;n/a&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>And what if you don&#8217;t like to have the definition name displayed in
the mode-line? There&#8217;s a solution for you as well (suggested by
<a href="http://www.lunaryorn.com/">Sebastian Wiesner</a>). Use the following bit
of code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="c1">;; Show the current function name in the header line</span>
</span><span class='line'><span class="p">(</span><span class="nv">which-function-mode</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nv">setq-default</span> <span class="nv">header-line-format</span>
</span><span class='line'>              <span class="o">&#39;</span><span class="p">((</span><span class="nv">which-func-mode</span> <span class="p">(</span><span class="s">&quot;&quot;</span> <span class="nv">which-func-format</span> <span class="s">&quot; &quot;</span><span class="p">))))</span>
</span><span class='line'><span class="p">(</span><span class="k">setq</span> <span class="nv">mode-line-misc-info</span>
</span><span class='line'>            <span class="c1">;; We remove Which Function Mode from the mode line, because it&#39;s mostly</span>
</span><span class='line'>            <span class="c1">;; invisible here anyway.</span>
</span><span class='line'>            <span class="p">(</span><span class="nv">assq-delete-all</span> <span class="ss">&#39;which-func-mode</span> <span class="nv">mode-line-misc-info</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>And you&#8217;ll get the following result:</p>

<p><img src="/images/articles/which-func-header.png"></p>

<p>That&#8217;s all for today, folks! Hack Emacs Lisp &amp; prosper!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/22/a-peek-at-emacs-24-dot-4-variadic-comparison-functions/">A Peek at Emacs 24.4: Variadic Numeric Comparison Functions</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-22T16:48:00+02:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2014</time>
        
         | <a href="/blog/2014/03/22/a-peek-at-emacs-24-dot-4-variadic-comparison-functions/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In most Lisps numeric comparison functions like <code>=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>
and <code>&gt;=</code> are variadic - meaning they accept variable number of arguments (as do functions like <code>+</code>, <code>-</code>, <code>*</code>, etc).
Here&#8217;s an example:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="c1">;; let&#39;s assume that all those are numeric variables</span>
</span><span class='line'><span class="p">(</span><span class="nb">=</span> <span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nb">&lt;</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is pretty cool and save you from writing code like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nb">=</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span> <span class="p">(</span><span class="nb">=</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">))</span>
</span><span class='line'><span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">b</span> <span class="nv">c</span><span class="p">)</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="nv">c</span> <span class="nv">d</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Prefix function position for the win!</p>

<p>In Emacs Lisp, however, all these comparison functions (unlike <code>+</code>, <code>-</code>, etc)
accept just two arguments, which is somewhat unlispy. Luckily this is
one of the things that&#8217;s going to change with Emacs 24.4.
Emacs Lisp takes another small step to becoming a good Lisp dialect!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/22/a-peek-at-emacs-24-dot-4-focus-hooks/">A Peek at Emacs 24.4: Focus Hooks</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-22T16:05:00+02:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2014</time>
        
         | <a href="/blog/2014/03/22/a-peek-at-emacs-24-dot-4-focus-hooks/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>A couple of years ago I
<a href="http://batsov.com/articles/2012/03/08/emacs-tip-number-5-save-buffers-automatically-on-buffer-or-window-switch/">lamented over the lack of frame focus hooks in Emacs</a>. This
prohibited us from implemented a feature like IntelliJ IDEA&#8217;s &#8220;auto-save on
focus lost&#8221;, which was kind of frustrating as we&#8217;re generally assuming that everything is doable in Emacs!</p>

<p>All this changes in Emacs 24.4 with the introduction of two new hooks - <code>focus-in-hook</code> and <code>focus-out-hook</code>.
The first is triggered when the current frame gains focus and the second when the frame loses focus.
So, if we want to save our active buffer when the Emacs frame loses focus we can simply do it like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;focus-out-hook</span> <span class="ss">&#39;save-buffer</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Or you can go a step further and save all the buffers:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;focus-out-hook</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span> <span class="p">(</span><span class="nv">save-some-buffers</span> <span class="no">t</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>I pretty sure you&#8217;ll find other creative ways to apply those new hooks to good use!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/01/a-peek-at-emacs-24-dot-4-delete-duplicate-lines/">A Peek at Emacs 24.4: Delete-duplicate-lines</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-01T17:33:00+02:00" pubdate data-updated="true">Mar 1<span>st</span>, 2014</time>
        
         | <a href="/blog/2014/03/01/a-peek-at-emacs-24-dot-4-delete-duplicate-lines/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Emacs 24.4 introduces the command <code>delete-duplicate-lines</code>.</p>

<p>By default <code>M-x delete-duplicate-lines</code> will delete all but one copy
of any identical lines in the region. So assuming this is the region:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>test
</span><span class='line'>dup
</span><span class='line'>dup
</span><span class='line'>one
</span><span class='line'>two
</span><span class='line'>one
</span><span class='line'>three
</span><span class='line'>one
</span><span class='line'>test
</span><span class='line'>five</span></code></pre></td></tr></table></div></figure>


<p>it will be reduced to this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>test
</span><span class='line'>dup
</span><span class='line'>one
</span><span class='line'>two
</span><span class='line'>three
</span><span class='line'>five</span></code></pre></td></tr></table></div></figure>


<p>When the command is invoked with a <code>C-u</code> prefix, it searches backwards
and keeps the last instance of each repeated line. So this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>test
</span><span class='line'>dup
</span><span class='line'>dup
</span><span class='line'>one
</span><span class='line'>two
</span><span class='line'>one
</span><span class='line'>three
</span><span class='line'>one
</span><span class='line'>test
</span><span class='line'>five</span></code></pre></td></tr></table></div></figure>


<p>will become:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>dup
</span><span class='line'>two
</span><span class='line'>three
</span><span class='line'>one
</span><span class='line'>test
</span><span class='line'>five</span></code></pre></td></tr></table></div></figure>


<p>Identical lines need not be adjacent, unless you&#8217;ve invoked the
command with a <code>C-u C-u</code> prefix.  When the command is invoked with a
<code>C-u C-u C-u</code> prefix, it retains repeated blank lines.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/02/a-peek-at-emacs-24-dot-4-hash-table-keys-and-hash-table-values/">A Peek at Emacs 24.4: Hash-table-keys &amp; Hash-table-values</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-02T09:59:00+02:00" pubdate data-updated="true">Feb 2<span>nd</span>, 2014</time>
        
         | <a href="/blog/2014/02/02/a-peek-at-emacs-24-dot-4-hash-table-keys-and-hash-table-values/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>While Emacs has a pretty good hash-table API, two functions were
rather mysteriously absent from it - <code>hash-table-keys</code> and
<code>hash-table-values</code> (which would return a list of all keys/values in a
hash-table).</p>

<p>Many people who needed them simply defined them in their code
directly (usually in terms of <code>maphash</code>), but that&#8217;s no longer
necessary in Emacs 24.4, as they are now part of the new built-in
library <code>subr-x</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="c1">;; all functions in the library are defined as inline, so you don&#39;t</span>
</span><span class='line'><span class="c1">;; need to require the library at runtime</span>
</span><span class='line'><span class="p">(</span><span class="nv">eval-when-compile</span> <span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;subr-x</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="k">setq</span> <span class="nv">h</span> <span class="p">(</span><span class="nb">make-hash-table</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nv">puthash</span> <span class="s">&quot;Batman&quot;</span> <span class="s">&quot;Bruce Wayne&quot;</span> <span class="nv">h</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nv">puthash</span> <span class="s">&quot;Spiderman&quot;</span> <span class="s">&quot;Peter Parker&quot;</span> <span class="nv">h</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nv">puthash</span> <span class="s">&quot;Superman&quot;</span> <span class="s">&quot;Clark Kent&quot;</span> <span class="nv">h</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nv">hash-table-keys</span> <span class="nv">h</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; (&quot;Batman&quot; &quot;Spiderman&quot; &quot;Superman&quot;)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nv">hash-table-values</span> <span class="nv">h</span><span class="p">)</span>
</span><span class='line'><span class="c1">; =&gt; (&quot;Bruce Wayne&quot; &quot;Peter Parker&quot; &quot;Clark Kent&quot;)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nice and simple.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/2/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Emacs Redux</h1>
  <p>Emacs Redux&#8217;s mission is to hone your Emacs skills and increase your appreciation for Emacs&#8217;s might and magic.
  You can show your love for Emacs Redux via Gratipay:</p>
  <a href="https://www.gratipay.com/bbatsov"><img src="https://cdn.rawgit.com/gratipay/gratipay-badge/2.1.3/dist/gratipay.png"></img></a>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/07/19/jdee-reborn/">JDEE Reborn</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/23/mastering-emacs-the-first-emacs-book-in-over-a-decade-is-out/">Mastering Emacs (the first Emacs book in over a decade) is out</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/16/learning-emacs-lisp/">Learning Emacs Lisp</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/16/pragmatic-emacs/">Pragmatic Emacs</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/10/building-melpa-packages-locally/">Building MELPA packages locally</a>
      </li>
    
  </ul>
</section>
<section>
     <h1>Twitter</h1>
     <!-- PASTE THE WIDGET CODE HERE -->
     <a class="twitter-timeline" href="https://twitter.com/bbatsov" data-widget-id="382536919663386624">Tweets by @bbatsov</a>
     <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
 </section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/bbatsov">@bbatsov</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'bbatsov',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Bozhidar Batsov -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'emacsredux';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
