
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Emacs Redux</title>
  <meta name="author" content="Bozhidar Batsov">

  
  <meta name="description" content="One of my bigger problems as an Emacs user is that there only so
many good keybindings available. At some point you&#8217;re out of good
options, but &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://emacsredux.com/blog/page/8">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Emacs Redux" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39624961-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Emacs Redux</a></h1>
  
    <h2>Return to the Essence of Text Editing</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:emacsredux.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="https://github.com/bbatsov/prelude">Prelude</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/28/execute-commands-ninja-style-with-key-chord-mode/">Execute Commands Ninja-style With Key-chord-mode</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-28T08:45:00+03:00" pubdate data-updated="true">Apr 28<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/28/execute-commands-ninja-style-with-key-chord-mode/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One of my bigger problems as an Emacs user is that there <strong>only so
many good keybindings</strong> available. At some point you&#8217;re out of good
options, but there are still plenty of commands you&#8217;d rather be able
to execute faster than you&#8217;d be able to do with <code>M-x command-name</code>.</p>

<p><a href="http://www.emacswiki.org/emacs/key-chord.el">key-chord-mode</a> to the
rescue! It&#8217;s a pretty handy minor mode which allows you to bind
commands to keys that should be pressed together or consecutively(with
little time between the keystrokes - by default 0.3 seconds). This
gives you some pretty good opportunities to increase your
productivity. Assuming you&#8217;ve installed the mode somehow, you can start
playing with it:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="c1">;; key chords</span>
</span><span class='line'><span class="p">(</span><span class="nb">require</span> <span class="ss">&#39;key-chord</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nv">key-chord-define-global</span> <span class="s">&quot;BB&quot;</span> <span class="ss">&#39;iswitchb</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nv">key-chord-define-global</span> <span class="s">&quot;FF&quot;</span> <span class="ss">&#39;find-file</span><span class="p">)</span>
</span><span class='line'><span class="p">(</span><span class="nv">key-chord-define-global</span> <span class="s">&quot;jk&quot;</span> <span class="ss">&#39;beginning-of-buffer</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nv">key-chord-mode</span> <span class="mi">+1</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The examples above illustrate global key-chords. Major mode specific
key chords are also available.</p>

<p>One should be careful about the key-chord he chooses - it should
definitely be something you&#8217;re unlikely to type normally. This also
means that if you&#8217;re writing in Emacs in several languages with common
letters, key chords that make sense in say English, might not make
sense in French (for instance). Luckily for me - I write almost
exclusively in English or some programming language (and Bulgarian and
English are nothing alike).</p>

<p>One other note - key chords don&#8217;t play very well with
<code>evil-mode</code>(Emacs&#8217;s vim emulation layer) for obvious reasons. vim is
kind of key-chord-mode&#8217;s principle inspiration. If you&#8217;re an <code>evil-mode</code> user you
probably don&#8217;t need key-chord-mode anyways.</p>

<p><a href="https://github.com/bbatsov/prelude">Prelude</a> enables <code>key-chord-mode</code>
out of the box and makes some creative use of it with <code>jj</code> and <code>JJ</code>
(which I&#8217;d advise you try out if you didn&#8217;t know about them).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/28/switch-to-previous-buffer/">Switch to Previous Buffer</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-28T08:43:00+03:00" pubdate data-updated="true">Apr 28<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/28/switch-to-previous-buffer/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Jumping between the current buffer and the one you were in before is a
pretty common task. It&#8217;s also one you can solve in a multitude of
way - the most popular being simply the use of <code>switch-to-buffer</code> and
<code>ido-switch-to-buffer</code>. Both commands (which are generally bound to
<code>C-x b</code>) would suggest to select the previous buffer when you invoke
them. While this was good enough for me for many years, recently
<a href="https://github.com/lukerandall">Luke Randall</a> suggested me a neat
alternative:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nb">defun</span> <span class="nv">switch-to-previous-buffer</span> <span class="p">()</span>
</span><span class='line'>  <span class="s">&quot;Switch to previously open buffer.</span>
</span><span class='line'><span class="s">Repeated invocations toggle between the two most recently open buffers.&quot;</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">switch-to-buffer</span> <span class="p">(</span><span class="nv">other-buffer</span> <span class="p">(</span><span class="nv">current-buffer</span><span class="p">)</span> <span class="mi">1</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>When you pair this command with a handy
<a href="/blog/2013/04/28/execute-commands-ninja-style-with-key-chord-mode/">key chord</a>
it becomes a great performance booster:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">key-chord-define-global</span> <span class="s">&quot;JJ&quot;</span> <span class="ss">&#39;switch-to-previous-buffer</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you&#8217;re not fond of key chords I&#8217;d suggest a good old keybinding instead:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-c b&quot;</span><span class="p">)</span> <span class="ss">&#39;switch-to-previous-buffer</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The command and its key chord are part of <a href="https://github.com/bbatsov/prelude">Prelude</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/21/custom-config-for-shells/">Custom Config for Shells</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-21T15:06:00+03:00" pubdate data-updated="true">Apr 21<span>st</span>, 2013</time>
        
         | <a href="/blog/2013/04/21/custom-config-for-shells/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Anybody knows that you can run a shell inside Emacs with <code>M-x
shell</code>. Few people know you can have Emacs run some additional
configuration for the shell after it&#8217;s started.</p>

<p>Emacs sends the new shell the contents of the file
<code>~/.emacs_shellname</code> as input, if it exists, where <code>shellname</code> is the
name of the name if your shell - <code>bash</code>, <code>zsh</code>, etc. For example, if you
use <code>bash</code>, the file sent to it is <code>~/.emacs_bash</code>. If this file is not
found, Emacs tries with <code>~/.emacs.d/init_shellname.sh</code>.</p>

<p>One popular application of such custom configuration is to have a
simpler shell prompt in Emacs, compared to the one you usually employ,
since <code>shell-mode</code> doesn&#8217;t deal well with fancy prompts.</p>

<p>You can find out more about running interactive shells in Emacs
<a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Interactive-Shell.html">here</a>
or by typing <code>C-h r m Interactive Shell RET</code> in your favorite text
editor.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/21/camelcase-aware-editing/">CamelCase Aware Editing</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-21T12:52:00+03:00" pubdate data-updated="true">Apr 21<span>st</span>, 2013</time>
        
         | <a href="/blog/2013/04/21/camelcase-aware-editing/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One common hurdle Emacs users experience when hacking in Emacs is that
many programming languages use <code>CamelCase</code> for class names, method
names, identifiers, etc, but Emacs (unlike most IDEs) doesn&#8217;t treat
CamelCase words the same special way it treats <code>lisp-case</code> and <code>snake_case</code>
words. Let me illustrate this with an example.</p>

<p>If you invoke <code>kill-word</code>(<code>M-d</code>) when your cursor is before
<code>lisp-case</code> this would kill just <code>lisp</code> and leave you with <code>-case</code>. If
you do the same with <code>CamelCase</code> the entire &#8220;word&#8221; CamelCase will be
killed. Same goes for navigation-by-word commands like <code>forward-word</code>,
<code>backward-word</code>, etc - they are aware of the subwords that comprise a
<code>lisp-case</code> or a <code>snake_case</code> word, but are oblivious to
<code>CamelCase</code>. So, what can we do? The answer is surprisingly simple -
just use the built-in minor mode <code>subword-mode</code> (formerly known as
<code>c-subword-mode</code>).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="c1">;; enable just in ruby-mode</span>
</span><span class='line'><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;ruby-mode-hook</span> <span class="ss">&#39;subword-mode</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">;; enable for all programming modes</span>
</span><span class='line'><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;prog-mode-hook</span> <span class="ss">&#39;subword-mode</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>At this point you can try again <code>kill-word</code> before <code>CamelCase</code>. Only
<code>Camel</code> is killed now. Sweet!</p>

<p><a href="https://github.com/bbatsov/prelude">Prelude</a> enables <code>subword-mode</code>
out of the box for programming modes that make use of <code>CamelCase</code>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/21/edit-files-as-root/">Edit Files as Root</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-21T10:03:00+03:00" pubdate data-updated="true">Apr 21<span>st</span>, 2013</time>
        
         | <a href="/blog/2013/04/21/edit-files-as-root/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>One area where Emacs traditionally falls short by default is editing
files that require <code>root</code> permissions. Since most Emacs users just use
a single Emacs frame they never leave, they have the problem of having
started it with their current user&#8217;s privileges(and it&#8217;s unlikely this
user is <code>root</code>). In this post I&#8217;ll describe two ways to alleviate that
particular problem (note that <code>emacsclient</code> users have other options
to pick from as well - one is mentioned at the very end of the post).</p>

<p>Here&#8217;s <strong>Option A</strong> - a simple command that allows you to reopen the
currently visited file with root permissions(obtained via <code>tramp</code> and
<code>sudo</code>) and prompts you for a file name if you&#8217;re not currently
visiting a file or supply a prefix argument:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nb">defun</span> <span class="nv">sudo-edit</span> <span class="p">(</span><span class="k">&amp;optional</span> <span class="nv">arg</span><span class="p">)</span>
</span><span class='line'>  <span class="s">&quot;Edit currently visited file as root.</span>
</span><span class='line'>
</span><span class='line'><span class="s">With a prefix ARG prompt for a file to visit.</span>
</span><span class='line'><span class="s">Will also prompt for a file to visit if current</span>
</span><span class='line'><span class="s">buffer is not visiting a file.&quot;</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">interactive</span> <span class="s">&quot;P&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">or</span> <span class="nv">arg</span> <span class="p">(</span><span class="nb">not</span> <span class="nv">buffer-file-name</span><span class="p">))</span>
</span><span class='line'>      <span class="p">(</span><span class="nv">find-file</span> <span class="p">(</span><span class="nv">concat</span> <span class="s">&quot;/sudo:root@localhost:&quot;</span>
</span><span class='line'>                         <span class="p">(</span><span class="nv">ido-read-file-name</span> <span class="s">&quot;Find file(as root): &quot;</span><span class="p">)))</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">find-alternate-file</span> <span class="p">(</span><span class="nv">concat</span> <span class="s">&quot;/sudo:root@localhost:&quot;</span> <span class="nv">buffer-file-name</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>I came across a similar command a few years back and it&#8217;s been pretty
useful to me ever since. If you like it, I&#8217;d suggest binding it to <code>C-x
C-r</code> (kind of like <code>find-file</code>&#8217;s binding <code>C-x C-f</code>).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-x C-r&quot;</span><span class="p">)</span> <span class="ss">&#39;sudo-edit</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Option B</strong></p>

<p>Lately I&#8217;ve decided that such a command is a bit of an overhead, since
we can check the file permissions automatically anyways. While I&#8217;m not
quite fond of advising commands (debugging advised commands is no
fun) this was an excellent opportunity to exploit them (for great
good):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">defadvice</span> <span class="nv">ido-find-file</span> <span class="p">(</span><span class="nv">after</span> <span class="nv">find-file-sudo</span> <span class="nv">activate</span><span class="p">)</span>
</span><span class='line'>  <span class="s">&quot;Find file as root if necessary.&quot;</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nb">and</span> <span class="nv">buffer-file-name</span>
</span><span class='line'>               <span class="p">(</span><span class="nv">file-writable-p</span> <span class="nv">buffer-file-name</span><span class="p">))</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">find-alternate-file</span> <span class="p">(</span><span class="nv">concat</span> <span class="s">&quot;/sudo:root@localhost:&quot;</span> <span class="nv">buffer-file-name</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>This advises <code>ido-find-file</code>(you might want to advise <code>find-file</code>
instead if you&#8217;re not using <code>ido</code>) to reopen the selected file as
root(you&#8217;ll be prompted for your <code>sudo</code> password) if you don&#8217;t have
write permissions for it. Extremely cool!</p>

<p>The first command has been part of
<a href="https://github.com/bbatsov/prelude">Prelude</a> since forever. As of late,
the <code>ido-find-file</code> advice is also present there and it
generally voids the need for <code>sudo-edit</code>.</p>

<p><strong>P.S.</strong></p>

<p><code>emacsclient</code> users have it easy. They just need the following shell
alias(I generally alias <code>e</code> to <code>emacsclient -t</code>):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">alias </span><span class="nv">E</span><span class="o">=</span><span class="s2">&quot;SUDO_EDITOR=\&quot;emacsclient -t -a emacs\&quot; sudoedit&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This should(will) finally save you from reaching for <code>vim</code> in the terminal.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/18/evaluate-emacs-lisp-in-the-minibuffer/">Evaluate Emacs Lisp in the Minibuffer</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-18T14:44:00+03:00" pubdate data-updated="true">Apr 18<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/18/evaluate-emacs-lisp-in-the-minibuffer/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The Emacs Lisp interpreter&#8217;s integration with Emacs is pervasive. One
can evaluate Emacs Lisp just about everywhere in so many different
ways. One way I find particularly handy(especially for short snippets of
code) is evaluating Emacs Lisp directly in the minibuffer. This is
done with <code>M-:</code>(bound to the command <code>eval-expression</code>).</p>

<p>Upon typing this magic keycombo you&#8217;ll be presented with the prompt
<code>Eval:</code> in the minibuffer and there you can enter any Lisp
expression. Hitting <code>Return</code> will result in the expression&#8217;s
evaluation.</p>

<p>There is one minor snafu with this, though - I&#8217;m addicted to
<a href="http://emacsrocks.com/e14.html">Paredit</a>(for editing Lisp code at
least) and Paredit is not automatically enabled in the
minibuffer. Let&#8217;s change that:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nb">defun</span> <span class="nv">conditionally-enable-paredit-mode</span> <span class="p">()</span>
</span><span class='line'>  <span class="s">&quot;Enable `paredit-mode&#39; in the minibuffer, during `eval-expression&#39;.&quot;</span>
</span><span class='line'>  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">eq</span> <span class="nv">this-command</span> <span class="ss">&#39;eval-expression</span><span class="p">)</span>
</span><span class='line'>      <span class="p">(</span><span class="nv">paredit-mode</span> <span class="mi">1</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">&#39;minibuffer-setup-hook</span> <span class="ss">&#39;conditionally-enable-paredit-mode</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Evaluate this snippet and try <code>M-:</code> again. If you&#8217;re like me - the
results will please you.</p>

<p>It should come as no surprise that
<a href="https://github.com/bbatsov/prelude">Prelude</a> enables Paredit by
default for <code>eval-expression</code>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/12/delete-selection-on-insert/">Delete Selection on Insert</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-12T11:57:00+03:00" pubdate data-updated="true">Apr 12<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/12/delete-selection-on-insert/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>It most text editors if you select a piece of text and press any
key(that&#8217;s not bound to some command) the selection would be replaced
by the character bound to the key(or deleted if you press
<code>Backspace</code>).  In Emacs things look differently - by default typed
text is just inserted at point, regardless of any selection.</p>

<p>Of course, there is a way to change this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">delete-selection-mode</span> <span class="mi">+1</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now when <code>transient-mark-mode</code> is also enabled(it is enabled by
default since Emacs 23) any typed text replaces the selection if the
selection is active.</p>

<p>Personally I find this behavior more useful than the default
one. That&#8217;s why it should be no surprise that <code>delete-selection-mode</code>
is enabled by default in
<a href="https://github.com/bbatsov/prelude">Prelude</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/09/kill-whole-line/">Kill Whole Line</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-09T14:49:00+03:00" pubdate data-updated="true">Apr 9<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/09/kill-whole-line/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Let&#8217;s continue our exploration of the fascinating topic of
<a href="/blog/2013/04/08/kill-line-backward/">killing lines</a>. Apart from
killing lines from the cursor to the end of the line(<code>kill-line</code>) and
killing lines from the cursor back to the beginning of the
line(<code>kill-line</code> with a <code>0</code> prefix argument) you can also kill entire
lines with a single command - <code>kill-whole-line</code>.</p>

<p>The command is bound to <code>C-S-Backspace</code> by default and kills the line
including its newline. With a prefix argument, it will kill that many
lines starting from the current line. If the argument is negative it
will kill that many lines backward plus the preceding newline. If the
argument is <code>0</code>, it will kill the current line but exclude the
trailing newline. We can improve the command a bit by making it
indentation aware(like we did for backward kill line in the previous post):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nb">defun</span> <span class="nv">smart-kill-whole-line</span> <span class="p">(</span><span class="k">&amp;optional</span> <span class="nv">arg</span><span class="p">)</span>
</span><span class='line'>  <span class="s">&quot;A simple wrapper around `kill-whole-line&#39; that respects indentation.&quot;</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">interactive</span> <span class="s">&quot;P&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">kill-whole-line</span> <span class="nv">arg</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">back-to-indentation</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now we can rebind <code>C-S-Backspace</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">global-set-key</span> <span class="nv">[remap</span> <span class="nv">kill-whole-line]</span> <span class="ss">&#39;smart-kill-whole-line</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>remap</code> is a pretty neat trick in its own right; maybe I&#8217;ll write a
bit more about it in the future.</p>

<p>The <code>smart-kill-whole-line</code> command is available out-of-the-box in
<a href="https://github.com/bbatsov/prelude">Prelude</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/08/kill-line-backward/">Kill Line Backward</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-08T18:33:00+03:00" pubdate data-updated="true">Apr 8<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/08/kill-line-backward/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Emacs does not have a command <code>backward-kill-line</code>(which would kill
the text from the point to the beginning of the line), but it doesn&#8217;t
really need one anyways. Why so? Simple enough - invoking <code>kill-line</code>
with a prefix argument <code>0</code> does exactly the same thing!</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>C-0 C-k
</span><span class='line'>M-0 C-k
</span><span class='line'>C-u 0 C-k</span></code></pre></td></tr></table></div></figure>


<p>Take your pick! If you&#8217;d rather have a quicker way to do backward line
killing you might consider rebinding <code>C-Backspace</code> or
<code>M-Backspace</code>(both are bound to <code>backward-word-kill</code> by
default). Personally I always do word killing with <code>M-Backspace</code>, so I
favor rebinding <code>C-Backspace</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-&lt;backspace&gt;&quot;</span><span class="p">)</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span>
</span><span class='line'>                                        <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
</span><span class='line'>                                        <span class="p">(</span><span class="nv">kill-line</span> <span class="mi">0</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>This command can be further improved if killing backward factors the
current indentation level:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">global-set-key</span> <span class="p">(</span><span class="nv">kbd</span> <span class="s">&quot;C-&lt;backspace&gt;&quot;</span><span class="p">)</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span>
</span><span class='line'>                                        <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
</span><span class='line'>                                        <span class="p">(</span><span class="nv">kill-line</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>                                        <span class="p">(</span><span class="nv">indent-according-to-mode</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Thanks to <a href="https://twitter.com/sanityinc">Steve Purcell</a> for
suggesting a similar command in the comments.</p>

<p>The <code>C-Backspace</code> keybinding is available out-of-the-box in
<a href="https://github.com/bbatsov/prelude">Prelude</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/07/display-visited-files-path-in-the-frame-title/">Display Visited File&#8217;s Path in the Frame Title</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-07T14:19:00+03:00" pubdate data-updated="true">Apr 7<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/07/display-visited-files-path-in-the-frame-title/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;m fond of seeing somewhere the full path to the file I&#8217;m currently
editing(as opposed to just the file name displayed in
modeline). Emacs&#8217;s frame title seems like a good place to display such
information, since by default it doesn&#8217;t show anything
interesting. Here&#8217;s how we can achieve this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="k">setq</span> <span class="nv">frame-title-format</span>
</span><span class='line'>      <span class="o">&#39;</span><span class="p">((</span><span class="ss">:eval</span> <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nv">buffer-file-name</span><span class="p">)</span>
</span><span class='line'>                   <span class="p">(</span><span class="nv">abbreviate-file-name</span> <span class="p">(</span><span class="nv">buffer-file-name</span><span class="p">))</span>
</span><span class='line'>                 <span class="s">&quot;%b&quot;</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>The path will be displayed in an abbreviated manner(<code>/home/bozhidar/</code>
will be shortened to just <code>~/</code>). If you&#8217;d like to see the expanded path
just remove the <code>abbreviate-file-name</code> function invocation. If a
buffer is not visiting a file, the buffer&#8217;s name would be displayed
instead.</p>

<p><a href="https://github.com/bbatsov/prelude">Prelude</a> sets
<code>frame-title-format</code> like this by default.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/9/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/7/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Emacs Redux</h1>
  <p>Emacs Redux&#8217;s mission is to hone your Emacs skills and increase your appreciation for Emacs&#8217;s might and magic.
  You can show your love for Emacs Redux via Gratipay:</p>
  <a href="https://www.gratipay.com/bbatsov"><img src="https://cdn.rawgit.com/gratipay/gratipay-badge/2.1.3/dist/gratipay.png"></img></a>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/07/19/ace-jump-mode-is-dead/">ace-jump-mode is Dead</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/19/jdee-reborn/">JDEE Reborn</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/23/mastering-emacs-the-first-emacs-book-in-over-a-decade-is-out/">Mastering Emacs (the first Emacs book in over a decade) is out</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/16/learning-emacs-lisp/">Learning Emacs Lisp</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/16/pragmatic-emacs/">Pragmatic Emacs</a>
      </li>
    
  </ul>
</section>
<section>
     <h1>Twitter</h1>
     <!-- PASTE THE WIDGET CODE HERE -->
     <a class="twitter-timeline" href="https://twitter.com/bbatsov" data-widget-id="382536919663386624">Tweets by @bbatsov</a>
     <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
 </section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/bbatsov">@bbatsov</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'bbatsov',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Bozhidar Batsov -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'emacsredux';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
